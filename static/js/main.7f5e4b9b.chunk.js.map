{"version":3,"sources":["index.js","simulation.js"],"names":["NetworkChart","props","step","newNodes","newLinks","nodes","links","margin","top","right","bottom","left","repulsivity","iterations","nodeColor","node","values","linkColor","link","nodeBorderWidth","nodeBorderColor","from","modifiers","linkThickness","tooltip","style","fontSize","name","tickSize","motionStiffness","motionDamping","LineChart","nowStep","LineNodes","count","Negative","Neutral","Positive","d","valueset","Array","Set","map","v","j","num","i","length","Math","round","result","Object","entries","key","stepcount","id","data","x","y","xScale","type","yScale","min","max","stacked","reverse","axisTop","axisRight","axisBottom","orient","tickPadding","tickRotation","legend","legendOffset","legendPosition","axisLeft","colors","pointSize","pointColor","theme","pointBorderWidth","pointBorderColor","pointLabel","pointLabelYOffset","useMesh","legends","anchor","direction","justify","translateX","translateY","itemsSpacing","itemDirection","itemWidth","itemHeight","itemOpacity","symbolSize","symbolShape","symbolBorderColor","MyResponsiveScatterPlot","DegNodes","filter","value","Degc","source","target","Degree","sort","a","b","slice","degreeCounts","DegNode","console","log","xFormat","e","yFormat","blendMode","format","index","toExponential","startsWith","effects","on","App","positiveEl","useRef","negativeEl","remainPercent","stepEl","currentStep","useState","setnowStep","setStep","steps","setData","useEffect","window","fetch","then","response","json","toString","radius","color","distance","item","weight","options","stepOptions","handleClickEvent","positiveIds","negativeIds","current","option","selected","push","newData","graph","percent","adjacencyLists","node2","calc","assign","simulation","rel","href","className","multiple","ref","class","onChange","event","preventDefault","defaultValue","onClick","width","height","render","document","querySelector"],"mappings":"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","file":"static/js/main.7f5e4b9b.chunk.js","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { ResponsiveNetwork } from \"@nivo/network\";\r\nimport { ResponsiveLine } from \"@nivo/line\";\r\nimport { ResponsiveStream } from \"@nivo/stream\";\r\nimport { simulation } from \"./simulation\";\r\nimport { ResponsiveScatterPlot } from \"@nivo/scatterplot\";\r\nimport \"./index.css\";\r\n\r\n//ネットワーク図\r\nconst NetworkChart = (props) => {\r\n  const step = props.step;\r\n  const newNodes = props.newNodes;\r\n  const newLinks = props.newLinks;\r\n  return (\r\n    <ResponsiveNetwork\r\n      nodes={newNodes}\r\n      links={newLinks}\r\n      margin={{ top: 0, right: 0, bottom: 0, left: 0 }}\r\n      repulsivity={3}\r\n      iterations={50}\r\n      nodeColor={(node) => {\r\n        if (node.values[step] === 1) {\r\n          return \"#E23C34\"; //\"red\";\r\n        } else if (node.values[step] === 0) {\r\n          return \"gray\";\r\n        } else if (node.values[step] === -1) {\r\n          return \"#5BB2DD\"; //\"blue\";\r\n        }\r\n      }}\r\n      linkColor={(link) => {\r\n        return \"gray\";\r\n      }}\r\n      nodeBorderWidth={0}\r\n      nodeBorderColor={{ from: \"color\", modifiers: [[\"darker\", 0.8]] }}\r\n      linkThickness={(link) => {\r\n        return 2;\r\n      }}\r\n      tooltip={(node) => {\r\n        return (\r\n          <div>\r\n            <p style={{ fontSize: 50 }}>{node.name}</p>\r\n          </div>\r\n        );\r\n      }}\r\n      tickSize={10}\r\n      motionStiffness={160}\r\n      motionDamping={12}\r\n    />\r\n  );\r\n};\r\n\r\n//折れ線グラフ\r\nconst LineChart = (props) => {\r\n  const step = props.nowStep;\r\n  const newNodes = props.newNodes;\r\n\r\n  const LineNodes = newNodes;\r\n  //各ステップごとの-1,0,1の数を数えるcountの作成し０で初期化\r\n  var count = { Negative: {}, Neutral: {}, Positive: {} };\r\n  for (var d = 0; d < step; d++) {\r\n    count.Negative[d] = 0;\r\n    count.Neutral[d] = 0;\r\n    count.Positive[d] = 0;\r\n  }\r\n\r\n  //countに対して、実際に-1,0,1の数を数えて代入\r\n  const valueset = Array.from(new Set(LineNodes.map(({ values }) => values)));\r\n  for (var v = 0; v < step; v++) {\r\n    for (const j of valueset) {\r\n      if (j[v] === -1) {\r\n        count.Negative[v] += 1;\r\n      } else if (j[v] === 0) {\r\n        count.Neutral[v] += 1;\r\n      } else if (j[v] === 1) {\r\n        count.Positive[v] += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  //数えられたcountに対して、それを割合に変換する\r\n  var num = 1.0;\r\n  for (var i = 0; i < 3; i++) {\r\n    for (var j = 0; j < step; j++) {\r\n      num = 1.0;\r\n      if (i === 0) {\r\n        num = (count.Negative[j] / LineNodes.length) * 100;\r\n        count.Negative[j] = Math.round(num * 10) / 10;\r\n      } else if (i === 1) {\r\n        num = (count.Neutral[j] / LineNodes.length) * 100;\r\n        count.Neutral[j] = Math.round(num * 10) / 10;\r\n      } else {\r\n        num = (count.Positive[j] / LineNodes.length) * 100;\r\n        count.Positive[j] = Math.round(num * 10) / 10;\r\n      }\r\n    }\r\n  }\r\n\r\n  //欲しいデータの形に作った配列等を代入する\r\n  const alldata = [];\r\n  function dataset() {\r\n    return Object.entries(count).map(([key, values]) => {\r\n      var stepcount = 0;\r\n      return {\r\n        id: key,\r\n        data: Object.values(values).map((d) => {\r\n          return {\r\n            x: stepcount++,\r\n            y: d,\r\n          };\r\n        }),\r\n      };\r\n    });\r\n  }\r\n  const result = dataset(alldata);\r\n\r\n  return (\r\n    <ResponsiveLine\r\n      data={result}\r\n      margin={{ top: 50, right: 30, bottom: 50, left: 60 }}\r\n      xScale={{ type: \"point\" }}\r\n      yScale={{\r\n        type: \"linear\",\r\n        min: 0,\r\n        max: 100,\r\n        stacked: false,\r\n        reverse: false,\r\n      }}\r\n      axisTop={null}\r\n      axisRight={null}\r\n      axisBottom={{\r\n        orient: \"bottom\",\r\n        tickSize: 5,\r\n        tickPadding: 5,\r\n        tickRotation: 0,\r\n        legend: \"TimeStep\",\r\n        legendOffset: 36,\r\n        legendPosition: \"middle\",\r\n      }}\r\n      axisLeft={{\r\n        orient: \"left\",\r\n        tickSize: 5,\r\n        tickPadding: 5,\r\n        tickRotation: 0,\r\n        legend: \"ratio\",\r\n        legendOffset: -40,\r\n        legendPosition: \"middle\",\r\n      }}\r\n      colors={(data) => {\r\n        if (data.id === \"Negative\") {\r\n          return \"#5BB2DD\"; //\"blue\";\r\n        } else if (data.id === \"Neutral\") {\r\n          return \"gray\";\r\n        } else {\r\n          return \"#E23C34\"; //\"red\";\r\n        }\r\n      }}\r\n      pointSize={10}\r\n      pointColor={{ theme: \"background\" }}\r\n      pointBorderWidth={2}\r\n      pointBorderColor={{ from: \"serieColor\" }}\r\n      pointLabel=\"y\"\r\n      pointLabelYOffset={-12}\r\n      useMesh={true}\r\n      legends={[\r\n        {\r\n          anchor: \"bottom-top\",\r\n          direction: \"row\",\r\n          justify: false,\r\n          translateX: 0,\r\n          translateY: -20,\r\n          itemsSpacing: 0,\r\n          itemDirection: \"left-to-right\",\r\n          itemWidth: 80,\r\n          itemHeight: 20,\r\n          itemOpacity: 0.75,\r\n          symbolSize: 12,\r\n          symbolShape: \"circle\",\r\n          symbolBorderColor: \"rgba(0, 0, 0, .5)\",\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n\r\nconst StreamChart = (props) => {\r\n  const step = props.nowStep;\r\n  const newNodes = props.newNodes;\r\n\r\n  const streamNodes = newNodes;\r\n  //各ステップごとの-1,0,1の数を数えるcountの作成し０で初期化\r\n  let count = [step];\r\n  for (var d = 0; d < step; d++) {\r\n    count[d] = { Negative: {}, Neutral: {}, Positive: {} };\r\n    count[d].Negative = 0;\r\n    count[d].Neutral = 0;\r\n    count[d].Positive = 0;\r\n  }\r\n\r\n  //countに対して、実際に-1,0,1の数を数えて代入\r\n  const valueset = Array.from(new Set(streamNodes.map(({ values }) => values)));\r\n  for (var v = 0; v < step; v++) {\r\n    for (const j of valueset) {\r\n      if (j[v] === -1) {\r\n        count[v].Negative += 1;\r\n      } else if (j[v] === 0) {\r\n        count[v].Neutral += 1;\r\n      } else if (j[v] === 1) {\r\n        count[v].Positive += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  //数えられたcountに対して、それを割合に変換する\r\n  var num = 1.0;\r\n  for (var i = 0; i < 3; i++) {\r\n    for (var j = 0; j < step; j++) {\r\n      num = 1.0;\r\n      if (i === 0) {\r\n        num = (count[j].Negative / streamNodes.length) * 100;\r\n        count[j].Negative = Math.round(num * 10) / 10;\r\n      } else if (i === 1) {\r\n        num = (count[j].Neutral / streamNodes.length) * 100;\r\n        count[j].Neutral = Math.round(num * 10) / 10;\r\n      } else {\r\n        num = (count[j].Positive / streamNodes.length) * 100;\r\n        count[j].Positive = Math.round(num * 10) / 10;\r\n      }\r\n    }\r\n  }\r\n  console.log(count);\r\n\r\n  let streamData = [];\r\n  streamData = count;\r\n\r\n  return (\r\n    <ResponsiveStream\r\n      data={streamData}\r\n      keys={[\"Positive\", \"Negative\", \"Neutral\"]}\r\n      margin={{ top: 50, right: 110, bottom: 50, left: 60 }}\r\n      axisTop={null}\r\n      axisRight={null}\r\n      axisBottom={{\r\n        orient: \"bottom\",\r\n        tickSize: 5,\r\n        tickPadding: 5,\r\n        tickRotation: 0,\r\n        legend: \"\",\r\n        legendOffset: 36,\r\n      }}\r\n      axisLeft={{\r\n        orient: \"left\",\r\n        tickSize: 5,\r\n        tickPadding: 5,\r\n        tickRotation: 0,\r\n        legend: \"\",\r\n        legendOffset: -40,\r\n      }}\r\n      offsetType=\"silhouette\"\r\n      colors={{ scheme: \"nivo\" }}\r\n      fillOpacity={0.85}\r\n      borderColor={{ theme: \"background\" }}\r\n      defs={[\r\n        {\r\n          id: \"dots\",\r\n          type: \"patternDots\",\r\n          background: \"inherit\",\r\n          color: \"#2c998f\",\r\n          size: 4,\r\n          padding: 2,\r\n          stagger: true,\r\n        },\r\n        {\r\n          id: \"squares\",\r\n          type: \"patternSquares\",\r\n          background: \"inherit\",\r\n          color: \"#e4c912\",\r\n          size: 6,\r\n          padding: 2,\r\n          stagger: true,\r\n        },\r\n      ]}\r\n      fill={[\r\n        {\r\n          match: {\r\n            id: \"Paul\",\r\n          },\r\n          id: \"dots\",\r\n        },\r\n        {\r\n          match: {\r\n            id: \"Marcel\",\r\n          },\r\n          id: \"squares\",\r\n        },\r\n      ]}\r\n      dotSize={8}\r\n      dotColor={{ from: \"color\" }}\r\n      dotBorderWidth={2}\r\n      dotBorderColor={{ from: \"color\", modifiers: [[\"darker\", 0.7]] }}\r\n      legends={[\r\n        {\r\n          anchor: \"bottom-right\",\r\n          direction: \"column\",\r\n          translateX: 100,\r\n          itemWidth: 80,\r\n          itemHeight: 20,\r\n          itemTextColor: \"#999999\",\r\n          symbolSize: 12,\r\n          symbolShape: \"circle\",\r\n          effects: [\r\n            {\r\n              on: \"hover\",\r\n              style: {\r\n                itemTextColor: \"#000000\",\r\n              },\r\n            },\r\n          ],\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n\r\n//次数の分布\r\nconst MyResponsiveScatterPlot = (props) => {\r\n  const step = props.step;\r\n  const data = props.data;\r\n  const newNodes = props.newNodes;\r\n  //const newLinks = props.newLinks;\r\n  const LineNodes = newNodes;\r\n  //各ステップごとの-1,0,1の数を数えるcountの作成し０で初期化\r\n  var count = { Negative: {}, Neutral: {}, Positive: {} };\r\n  for (var d = 0; d < step; d++) {\r\n    count.Negative[d] = 0;\r\n    count.Neutral[d] = 0;\r\n    count.Positive[d] = 0;\r\n  }\r\n  //countに対して、実際に-1,0,1の数を数えて代入\r\n  const valueset = Array.from(new Set(LineNodes.map(({ values }) => values)));\r\n  for (var v = 0; v < step; v++) {\r\n    for (const j of valueset) {\r\n      if (j[v] === -1) {\r\n        count.Negative[v] += 1;\r\n      } else if (j[v] === 0) {\r\n        count.Neutral[v] += 1;\r\n      } else if (j[v] === 1) {\r\n        count.Positive[v] += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  //数えられたcountに対して、それを割合に変換する\r\n  var num = 1.0;\r\n  for (var i = 0; i < 3; i++) {\r\n    for (var j = 0; j < step; j++) {\r\n      num = 1.0;\r\n      if (i === 0) {\r\n        num = (count.Negative[j] / LineNodes.length) * 100;\r\n        count.Negative[j] = Math.round(num * 10) / 10;\r\n      } else if (i === 1) {\r\n        num = (count.Neutral[j] / LineNodes.length) * 100;\r\n        count.Neutral[j] = Math.round(num * 10) / 10;\r\n      } else {\r\n        num = (count.Positive[j] / LineNodes.length) * 100;\r\n        count.Positive[j] = Math.round(num * 10) / 10;\r\n      }\r\n    }\r\n  }\r\n\r\n  //次数について\r\n  function Degcount(value) {\r\n    var Degc = 0;\r\n    for (const links of data.links) {\r\n      if (value.id === links.source || value.id === links.target) {\r\n        Degc++;\r\n      }\r\n    }\r\n    if (Degc > 0) {\r\n      value.Degree = Degc;\r\n      return value;\r\n    }\r\n  }\r\n  var DegNodes = [];\r\n  DegNodes = data.nodes.filter(Degcount);\r\n  DegNodes.sort(function (a, b) {\r\n    return a.Degree > b.Degree ? -1 : 1;\r\n  });\r\n  DegNodes.slice(0, 99);\r\n\r\n  //各次数の数を数える\r\n  const degreeCounts = {};\r\n  for (const DegNode of DegNodes) {\r\n    degreeCounts[DegNode.Degree] = 0;\r\n  }\r\n\r\n  for (const DegNode of DegNodes) {\r\n    degreeCounts[DegNode.Degree]++;\r\n  }\r\n\r\n  //欲しいデータの形に作った配列等を代入する\r\n  const alldata = [];\r\n  function dataset() {\r\n    return [\r\n      {\r\n        id: \"Degree\",\r\n        data: Object.entries(degreeCounts).map(([key, values]) => {\r\n          return {\r\n            x: key,\r\n            y: values / DegNodes.length,\r\n          };\r\n        }),\r\n      },\r\n    ];\r\n  }\r\n  const result = dataset(alldata);\r\n  console.log(result);\r\n\r\n  return (\r\n    <ResponsiveScatterPlot\r\n      data={result}\r\n      margin={{ top: 60, right: 30, bottom: 70, left: 90 }}\r\n      xScale={{ type: \"log\", min: 1, max: \"auto\" }}\r\n      xFormat={function (e) {\r\n        return e + \"\";\r\n      }}\r\n      yScale={{ type: \"log\", min: 1e-5, max: 1 }}\r\n      yFormat={function (e) {\r\n        return e + \"\";\r\n      }}\r\n      blendMode=\"multiply\"\r\n      axisTop={null}\r\n      axisRight={null}\r\n      axisBottom={{\r\n        orient: \"bottom\",\r\n        tickSize: 5,\r\n        tickPadding: 5,\r\n        tickRotation: 0,\r\n        legend: \"Degree\",\r\n        legendPosition: \"middle\",\r\n        legendOffset: 46,\r\n      }}\r\n      axisLeft={{\r\n        orient: \"left\",\r\n        tickSize: 5,\r\n        tickPadding: 5,\r\n        tickRotation: 0,\r\n        legend: \"Count\",\r\n        legendPosition: \"middle\",\r\n        legendOffset: -60,\r\n        format: (index) => {\r\n          const e = index.toExponential(1);\r\n          return e.startsWith(\"1\") ? e : \"\";\r\n        },\r\n      }}\r\n      legends={[\r\n        {\r\n          anchor: \"bottom-top\",\r\n          direction: \"row\",\r\n          justify: false,\r\n          translateX: 0,\r\n          translateY: 0,\r\n          itemWidth: 100,\r\n          itemHeight: -20,\r\n          itemsSpacing: 5,\r\n          itemDirection: \"left-to-right\",\r\n          symbolSize: 12,\r\n          symbolShape: \"circle\",\r\n          effects: [\r\n            {\r\n              on: \"hover\",\r\n              style: {\r\n                itemOpacity: 1,\r\n              },\r\n            },\r\n          ],\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n\r\n//左側コンポーネント\r\nconst App = () => {\r\n  let positiveEl = useRef(null);\r\n  let negativeEl = useRef(null);\r\n  let remainPercent = 0;\r\n  //let percentEl = useRef(null);\r\n  //step 10/9\r\n  let stepEl = useRef(null);\r\n  let currentStep = 50;\r\n  const [nowStep, setnowStep] = useState(50);\r\n  const [step, setStep] = useState(50);\r\n  var steps = [];\r\n  for (var i = 0; i <= nowStep; i++) {\r\n    steps[i] = i;\r\n  }\r\n\r\n  const handleChange = (event) => {\r\n    event.preventDefault();\r\n    currentStep = +event.target.value;\r\n  };\r\n\r\n  const handleRemain = (event) => {\r\n    event.preventDefault();\r\n    remainPercent = +event.target.value;\r\n  };\r\n\r\n  /*const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    setStep(+event.target.elements.step.value);\r\n    console.log(\"handleSubmit\" + event.target.elements.step.value);\r\n  };*/\r\n\r\n  //data set\r\n  const [data, setData] = useState({ nodes: [], links: [] });\r\n  useEffect(() => {\r\n    window\r\n      .fetch(\"all.json\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        for (const node of data.nodes) {\r\n          node.id = node.id.toString();\r\n          node.radius = 5;\r\n        }\r\n        for (const link of data.links) {\r\n          link.color = \"gray\";\r\n          link.source = link.source.toString();\r\n          link.target = link.target.toString();\r\n          link.distance = 20;\r\n        }\r\n        setData(data);\r\n      });\r\n  }, []);\r\n\r\n  const newLinks = data.links.filter(function (item, index) {\r\n    if (item.weight >= 5) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  });\r\n\r\n  function check(value) {\r\n    for (const links of newLinks) {\r\n      if (value.id === links.source || value.id === links.target) {\r\n        return value;\r\n      }\r\n    }\r\n  }\r\n\r\n  const newNodes = data.nodes.filter(check);\r\n  console.log(newNodes);\r\n\r\n  //次数について\r\n  function Degcount(value) {\r\n    var Degc = 0;\r\n    for (const links of newLinks) {\r\n      if (value.id === links.source || value.id === links.target) {\r\n        Degc++;\r\n      }\r\n    }\r\n    if (Degc > 1) {\r\n      value.Degree = Degc;\r\n      return value;\r\n    }\r\n  }\r\n  var DegNodes = [];\r\n  DegNodes = data.nodes.filter(Degcount);\r\n  DegNodes.sort(function (a, b) {\r\n    return a.Degree > b.Degree ? -1 : 1;\r\n  });\r\n  DegNodes.slice(0, 99);\r\n\r\n  const options = DegNodes.map((value) => {\r\n    return <option value={value.id}>{value.name}</option>;\r\n  });\r\n\r\n  const stepOptions = steps.map((value) => {\r\n    return <option value={value.id}>{value}</option>;\r\n  });\r\n\r\n  /*const perOptions = percents.map((value) => {\r\n    return <option value={value}>{value}</option>;\r\n  });*/\r\n\r\n  //onClick時　選択されたidを取得\r\n\r\n  const clickButton = () => {\r\n    handleClickEvent(currentStep, remainPercent);\r\n  };\r\n\r\n  const handlestep = () => {\r\n    for (const option of stepEl.current.options) {\r\n      if (option.selected === true) {\r\n        setStep(option.value);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClickEvent = (currentStep, remainPercent) => {\r\n    setStep(0);\r\n    setnowStep(currentStep);\r\n    var positiveIds = [];\r\n    var negativeIds = [];\r\n\r\n    for (var i = 0; i <= nowStep; i++) {\r\n      stepOptions[i] = i;\r\n    }\r\n\r\n    /*for (const option of percentEl.current.options) {\r\n      if (option.selected === true) {\r\n        percent = option.value;\r\n      }\r\n    }*/\r\n\r\n    for (const option of positiveEl.current.options) {\r\n      if (option.selected === true) {\r\n        positiveIds.push(option.value);\r\n      }\r\n    }\r\n\r\n    for (const option of negativeEl.current.options) {\r\n      if (option.selected === true) {\r\n        negativeIds.push(option.value);\r\n      }\r\n    }\r\n    const newData = simulation(\r\n      data,\r\n      positiveIds,\r\n      negativeIds,\r\n      remainPercent,\r\n      currentStep\r\n    );\r\n\r\n    setData(newData);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <head>\r\n        <link\r\n          rel=\"stylesheet\"\r\n          href=\"https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css\"\r\n        ></link>\r\n      </head>\r\n\r\n      {/*ヘッダー*/}\r\n\r\n      <section className=\"hero is-info\">\r\n        <div className=\"hero-body\">\r\n          <h1 className=\"title\">\r\n            TwitterにおけるNegative・Positiveの拡散シミュレーション\r\n          </h1>\r\n          <h2 className=\"subtitle\">\r\n            佐野幸恵らの「SNSにおける福島原発事故後の放射線情報拡散シミュレーション」\r\n            で収集された放射線に関するツイートデータを用いています。\r\n            データのRT関連データを作成し、３つのシミュレーションを行います。\r\n          </h2>\r\n        </div>\r\n      </section>\r\n\r\n      {/*tile*/}\r\n      <section className=\"section\">\r\n        <div className=\"tile is-ancestor\">\r\n          {/*詳細設定 */}\r\n          <div className=\"tile is-parent is-2\">\r\n            <article className=\"tile is-child notification box is-info\">\r\n              <p className=\"title\">詳細設定</p>\r\n              <p className=\"subtitle\">\r\n                4つの項目の詳細 を設定し、Startボタンを押してください。<br></br>\r\n                シミュレーションが開始されます。<br></br>\r\n                *重複した選択をすると、正しい結果が出ません。\r\n              </p>\r\n\r\n              <div className=\"field\">\r\n                <label className=\"label\">Positiveの発信源</label>\r\n                <div className=\"control\">\r\n                  <div className=\"select is-multiple is-fullwidth\">\r\n                    <select multiple ref={positiveEl}>\r\n                      {options}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"field\">\r\n                <label className=\"label\">Negativeの発信源</label>\r\n                <div className=\"control\">\r\n                  <div className=\"select is-multiple is-fullwidth\">\r\n                    <select multiple ref={negativeEl}>\r\n                      {options}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {/*シミュレーションstep*/}\r\n              <div className=\"field \">\r\n                <label className=\"label\">シミュレーション期間</label>\r\n                <div class=\"control\">\r\n                  <form onChange={handleChange}>\r\n                    <input\r\n                      className=\"input\"\r\n                      name=\"step\"\r\n                      type=\"number\"\r\n                      defaultValue={step}\r\n                    />\r\n                  </form>\r\n                </div>\r\n                <p className=\"help\">{nowStep}stepまでシミュレーションを行う</p>\r\n              </div>\r\n\r\n              <div className=\"field\">\r\n                <label className=\"label\">自分の意思の割合</label>\r\n                {/*選択肢ボタン*/}\r\n                <div className=\"control\">\r\n                  <form onChange={handleRemain}>\r\n                    <input\r\n                      className=\"input\"\r\n                      name=\"remain\"\r\n                      type=\"number\"\r\n                      defaultValue={remainPercent}\r\n                    />\r\n                  </form>\r\n                </div>\r\n                <p className=\"help\">自分の意思を0~100%の割合で反映します</p>\r\n              </div>\r\n\r\n              <div className=\"field\">\r\n                <div className=\"control\">\r\n                  <button\r\n                    className=\"button is-danger is-active is-large is-fullwidth\"\r\n                    onClick={clickButton}\r\n                  >\r\n                    Start\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </article>\r\n          </div>\r\n          {/*可視化結果*/}\r\n          <div className=\"tile is-parent is-vertical \">\r\n            <article className=\"tile is-child notification is-white box\">\r\n              <p className=\"title\">ネットワーク</p>\r\n              <p className=\"subtitle\">\r\n                下のステップ数を変更する事で、各ステップのシミュレーションを見る事ができます。\r\n                <br></br>\r\n                <ul>\r\n                  <li>\r\n                    赤色は「正しい情報を知っている状態( Positive )」です。\r\n                  </li>\r\n                  <li>青色は「デマを信じている状態( Negative )」です。</li>\r\n                  <li>\r\n                    灰色は「中立的な意見を持っている状態( Neutral )」です。\r\n                  </li>\r\n                  <li>孤立ノードは予め取り除いています。</li>\r\n                </ul>\r\n              </p>\r\n\r\n              <div className=\"field\">\r\n                <div className=\"control\">\r\n                  <div className=\"field has-addons\">\r\n                    <div className=\"select\">\r\n                      <select ref={stepEl} onChange={handlestep}>\r\n                        {stepOptions}\r\n                      </select>\r\n                    </div>\r\n                    <div className=\"control\"></div>\r\n                  </div>\r\n                </div>\r\n                <p className=\"help\">現在のステップ数 {step}</p>\r\n              </div>\r\n\r\n              <figure className=\"image is-square \">\r\n                <div className=\"has-ratio\" width=\"1000\" height=\"1000\">\r\n                  <NetworkChart\r\n                    step={step}\r\n                    newNodes={newNodes}\r\n                    newLinks={newLinks}\r\n                  />\r\n                </div>\r\n              </figure>\r\n            </article>\r\n          </div>\r\n          <div className=\"tile  is-vertical is-parent \">\r\n            <article className=\"tile  is-vertical is-child notification is-white box\">\r\n              <p className=\"title\">折れ線グラフ</p>\r\n              <p className=\"subtitle\">\r\n                各タイムステップに対し、ノード数の割合を見る事ができます。\r\n                横軸が「各タイムステップ」、縦軸が「全体を１とした時の割合」です。\r\n                <br></br>\r\n                ※全体を１としています\r\n              </p>\r\n              <figure className=\"image is-2by1\">\r\n                <div className=\"has-ratio\" width=\"1000\" height=\"500\">\r\n                  <LineChart\r\n                    step={step}\r\n                    nowStep={nowStep}\r\n                    newNodes={newNodes}\r\n                    newLinks={newLinks}\r\n                  />\r\n                </div>\r\n              </figure>\r\n            </article>\r\n            <article className=\"tile  is-vertical is-child notification is-white box\">\r\n              <p className=\"title\">次数分布</p>\r\n              <p className=\"subtitle\">\r\n                次数に関した両対数グラフをみる事がでます。\r\n                横軸が「次数」で縦軸が「割合」です\r\n              </p>\r\n              <figure className=\"image is-2by1\">\r\n                <div className=\"has-ratio\" width=\"1000\" height=\"500\">\r\n                  <MyResponsiveScatterPlot\r\n                    step={step}\r\n                    data={data}\r\n                    newNodes={newNodes}\r\n                    newLinks={newLinks}\r\n                  />\r\n                </div>\r\n              </figure>\r\n            </article>\r\n          </div>\r\n        </div>\r\n        {/*tile*/}\r\n      </section>\r\n      <footer className=\"footer is-warning\">\r\n        <div className=\"content has-text-centered\">\r\n          <p>&copy; 2020 船木駿之介, 望月沙和</p>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\nrender(<App />, document.querySelector(\"#content\"));\r\n","export const simulation = (graph, positiveIds, negativeIds, percent, step) => {\r\n  for (const node of graph.nodes) {\r\n    node.values[0] = 0;\r\n  }\r\n\r\n  for (const node of graph.nodes) {\r\n    for (const positiveId of positiveIds) {\r\n      if (positiveId === node.id) {\r\n        node.values[0] = 1;\r\n      }\r\n    }\r\n    for (const negativeId of negativeIds) {\r\n      if (negativeId === node.id) {\r\n        node.values[0] = -1;\r\n      }\r\n    }\r\n  }\r\n\r\n  const adjacencyLists = {};\r\n  for (const node of graph.nodes) {\r\n    adjacencyLists[node.id] = [];\r\n  }\r\n  for (const link of graph.links) {\r\n    adjacencyLists[link.source].push(link.target);\r\n    adjacencyLists[link.target].push(link.source);\r\n  }\r\n  //step数まで行う\r\n  const nodes = {};\r\n  for (const node of graph.nodes) {\r\n    nodes[node.id] = node;\r\n  }\r\n  let remainPercent = 100 - percent; //残りの割合\r\n  //istep(全ステップ)を捜査\r\n  for (let i = 1; i <= step; i++) {\r\n    //各ステップにおいて全ノードを捜査\r\n    for (const node of graph.nodes) {\r\n      let count = 0;\r\n      let links = adjacencyLists[node.id].length; //繋がっているノード数\r\n      //前の自分の状態に設定した自分の意思をかけたもの\r\n      count += node.values[i - 1] * percent;\r\n      //繋がっているノードについてのfor\r\n      for (const id of adjacencyLists[node.id]) {\r\n        //node2は繋がっているノードのこと\r\n        const node2 = nodes[id];\r\n        //残りの割合を繋がっているノード数で割ることで１つあたりの割合を計算\r\n        let calc = remainPercent / links;\r\n        if (node2.values[i - 1] === 1) {\r\n          count += 1 * calc;\r\n        } else if (node2.values[i - 1] === -1) {\r\n          count -= 1 * calc;\r\n        }\r\n      }\r\n      if (count > 0) {\r\n        node.values[i] = 1;\r\n      } else if (count < 0) {\r\n        node.values[i] = -1;\r\n      } else if (count === 0) {\r\n        node.values[i] = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  return Object.assign({}, graph);\r\n};\r\n"],"sourceRoot":""}